!function(){"use strict";function t(){var t=this,n=new e(t),a="http://api.openweathermap.org/data/2.5/weather?",o="http://openweathermap.org/img/w/";t.worker=n,t.URL=a,t.IMG_URL=o,t.data={}}function e(t){this.OW=t}t.prototype.getCurrentData=function(){var t=this;return t.data},t.prototype.getWeatherByLatLng=function(t,e,n){var a=this,o=a.URL+"lat="+t+"&lon="+e;a.worker.getData(o,n)},t.prototype.getWeatherByCurrentLocation=function(t){var e=this;navigator.geolocation.getCurrentPosition(function(t){var e=this.self,n=this.cbc,a=t.coords,o=e.URL+"lat="+a.latitude+"&lon="+a.longitude;e.worker.getData(o,n)}.bind({self:e,cbc:t}))},e.prototype.getData=function(t,e){var n=this,a=new XMLHttpRequest;a.open("GET",t,!0),a.onreadystatechange=function(){var t=this.XHR,e=this.self,n=this.cbc;if(4==t.readyState&&200==t.status){var a=JSON.parse(t.responseText);e.OW.data=a=e.processData(a),n(a)}}.bind({XHR:a,self:n,cbc:e}),a.send(null)},e.prototype.processData=function(t){var e=this,n=t.weather[0]||t.weather,a={main:n.main,detail:n.description,icon:e.getIconUrl(n.icon),iconCode:n.icon};return a},e.prototype.getIconUrl=function(t){var e=this;return e.OW.IMG_URL+t+".png"},window.OpenWeather=new t}();